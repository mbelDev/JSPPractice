<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.Connection"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    	<main>
<%
	String userID = (String)session.getAttribute("userID");
String userPW; 
String userNM; 
String userEM; 
String userHP; 
int userZIP;
String userAD;
	
	String driver = "oracle.jdbc.OracleDriver";
	String url = "jdbc:oracle:thin:@localhost:1521:xe";
	String id = "gundam";
	String pw = "EFSFsaikou0079";

	Connection conn = null;
	PreparedStatement psmt = null;
	ResultSet result = null;

	String sql = "SELECT * FROM MEMBER02 WHERE USERID = ?";

	try{
		Class.forName(driver);
		conn = DriverManager.getConnection(url,id,pw);
		psmt = conn.prepareStatement(sql);
		psmt.setString(1,userID);
		result = psmt.executeQuery();
		if(result.next()){
			userPW = result.getString("USERPW");
			userNM = result.getString("USERNM");
			userEM = result.getString("USEREM");
			userHP = result.getString("USERHP");
			userZIP = Integer.parseInt(result.getString("USERZIP"));
			userAD = result.getString("USERAD");
			

		}else{
			out.println("<script>alert('회원 정보를 찾을 수 없습니다.');history.back();</script>");
		}
	}catch(Exception e){
		e.printStackTrace();
	}
	finally{
		if(psmt!=null){	psmt.close();}
		if(conn!=null){	conn.close();}
		//연결을 끊을떄는 역순으로. 아주 !important! 하다
	}

%>

		<form action="join_process.jsp" metohd="POST">
			<table>
				<colgroup>
					<col style="width: 20%">
					<col style="width: 80%">
				</colgroup>
				<tbody>
					<tr>
						<th>아이디</th>
						<td><p><%=userID %></p></td>
					</tr>
					<tr>
						<th>비밀번호</th>
						<td><input type="password" name="userPW" id="userPW"
							placeholder=""></td>
					</tr>
					<tr>
						<th>이름</th>
						<td><p><%=userNM %></p></td>
					</tr>
					<tr>
						<th>메일</th>
						<td><p><%=userEM %></p></td>
					</tr>
					<tr>
						<th>연락처</th>
						<td><p><%=userHP %></p></td>
					</tr>
					<tr>
						<th>주소</th>
						<td>
							<div>
								<input type="text" name="userZIP" id="userZIP"
									placeholder="주소를 입력 해 주세요." readonly>
								<button class="btn ZIPCODE">우편번호</button>
							</div>
							<div>
								<input type="text" name="userAD01" id="userAD01"
									placeholder="주소를 입력 해 주세요." readonly> <span>기본주소</span>
							</div>
							<div>
								<input type="text" name="userAD02" id="userAD02"
									placeholder="주소를 입력 해 주세요.">

								<input type="text" name="userAD03" id="userAD03"
									placeholder="참고사항."> 
							</div>
						</td>
					</tr>
				</tbody>
			</table>
			<div>
				<button class="btn confirm">회원가입</button>
				<button type="reset">취소</button>
			</div>
		</form>

	</main>
<%@include file = "./include/footer.jsp" %>